<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Mis Peticiones | Gest Farma</title>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <!-- Bootstrap 3.3.2 -->
    <link href="../../bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />    
    <!-- FontAwesome 4.3.0 -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <!-- Ionicons 2.0.0 -->
    <link href="http://code.ionicframework.com/ionicons/2.0.0/css/ionicons.min.css" rel="stylesheet" type="text/css" />    
    <!-- Theme style -->
    <link href="../../dist/css/AdminLTE.min.css" rel="stylesheet" type="text/css" />
    <!-- AdminLTE Skins -->
    <link href="../../dist/css/skins/_all-skins.min.css" rel="stylesheet" type="text/css" />
    <!-- DataTables -->
    <link href="../../plugins/datatables/dataTables.bootstrap.css" rel="stylesheet" type="text/css" />

    <!-- Colores personalizados -->
    <style>
      /* Colores personalizados */
      .bg-aqua, .bg-light-blue { background-color: #183657 !important; }
      .bg-green { background-color: #14D5AA !important; }
      .bg-red { background-color: #FF1E70 !important; }
      .bg-yellow { background-color: #FF1E70 !important; }
      .bg-teal { background-color: #14D5AA !important; }
      
      .label-success { background-color: #14D5AA !important; }
      .label-warning { background-color: #FF1E70 !important; }
      .label-primary { background-color: #183657 !important; }
      
      .btn-success { background-color: #14D5AA !important; border-color: #14D5AA !important; }
      .btn-primary { background-color: #183657 !important; border-color: #183657 !important; }
      .btn-info { background-color: #183657 !important; border-color: #183657 !important; }
      
      .box.box-success .box-header { background-color: #14D5AA !important; }
      .box.box-primary .box-header { background-color: #183657 !important; }
      .box.box-info .box-header { background-color: #183657 !important; }
      
      .box.box-primary .box-header .box-title,
      .box.box-info .box-header .box-title {
        color: white !important;
      }
      
      .main-footer { background-color: #183657 !important; color: white !important; }
      .main-footer a { color: #14D5AA !important; }

      .requests-header {
        background: linear-gradient(135deg, #183657, #14D5AA);
        color: white;
        padding: 30px;
        border-radius: 10px;
        margin-bottom: 20px;
      }
      .request-card {
        background: white;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        border-left: 4px solid #dee2e6;
        transition: all 0.3s;
      }
      .request-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 20px rgba(0,0,0,0.12);
      }
      .request-card.confirmed {
        border-left-color: #14D5AA;
      }
      .request-card.pending {
        border-left-color: #ffc107;
      }
      .request-card.rejected {
        border-left-color: #FF1E70;
      }
      .request-card.cancelled {
        border-left-color: #6c757d;
      }
      .status-badge {
        display: inline-flex;
        align-items: center;
        padding: 5px 10px;
        border-radius: 15px;
        font-size: 12px;
        font-weight: bold;
      }
      .status-confirmed {
        background: rgba(20, 213, 170, 0.1);
        color: #14D5AA;
      }
      .status-pending {
        background: rgba(255, 193, 7, 0.1);
        color: #ffc107;
      }
      .status-rejected {
        background: rgba(255, 30, 112, 0.1);
        color: #FF1E70;
      }
      .status-cancelled {
        background: rgba(108, 117, 125, 0.1);
        color: #6c757d;
      }
      .priority-badge {
        display: inline-flex;
        align-items: center;
        padding: 3px 8px;
        border-radius: 10px;
        font-size: 10px;
        font-weight: bold;
      }
      .priority-high {
        background: rgba(220, 53, 69, 0.1);
        color: #dc3545;
      }
      .priority-medium {
        background: rgba(255, 193, 7, 0.1);
        color: #ffc107;
      }
      .priority-low {
        background: rgba(40, 167, 69, 0.1);
        color: #28a745;
      }
      .resource-type-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        color: white;
        margin-right: 15px;
      }
      .equipment { background-color: #183657; }
      .service { background-color: #14D5AA; }
      .space { background-color: #FF1E70; }
      .specialist { background-color: #ffc107; }
      .filter-tabs {
        background: white;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 1px 5px rgba(0,0,0,0.1);
      }
      .timeline {
        position: relative;
        padding-left: 20px;
      }
      .timeline:before {
        content: '';
        position: absolute;
        left: 8px;
        top: 0;
        bottom: 0;
        width: 2px;
        background: #dee2e6;
      }
      .timeline-item {
        position: relative;
        margin-bottom: 15px;
        padding-left: 25px;
      }
      .timeline-item:before {
        content: '';
        position: absolute;
        left: -8px;
        top: 5px;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #14D5AA;
      }
      .timeline-item.pending:before { background: #ffc107; }
      .timeline-item.rejected:before { background: #FF1E70; }
      .timeline-item.cancelled:before { background: #6c757d; }
      .quick-actions {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
      }
      .stats-card {
        text-align: center;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 15px;
        color: white;
      }
      .search-filters {
        background: white;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 1px 5px rgba(0,0,0,0.1);
      }
      .request-details {
        background: #f8f9fa;
        border-radius: 6px;
        padding: 15px;
        margin-top: 15px;
      }
      .action-buttons {
        margin-top: 15px;
      }
      .action-buttons .btn {
        margin-right: 10px;
        margin-bottom: 5px;
      }
      .calendar-view {
        background: white;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 1px 5px rgba(0,0,0,0.1);
      }
      .calendar-event {
        background: #14D5AA;
        color: white;
        padding: 5px;
        border-radius: 4px;
        margin: 2px 0;
        font-size: 11px;
      }
      .calendar-event.pending { background: #ffc107; }
      .calendar-event.rejected { background: #FF1E70; }
      .notification-panel {
        background: linear-gradient(45deg, #f8f9fa, #ffffff);
        border-radius: 8px;
        padding: 20px;
        border: 1px solid #dee2e6;
      }
    </style>
  </head>
  <body class="skin-blue">
    <div class="wrapper">
      
      <header class="main-header">
        <a href="../../index.html" class="logo">
          <img src="../../logo-proyectoPNG.png" alt="Gest Farma" style="height: 50px; max-width: 100%;">
        </a>
        <nav class="navbar navbar-static-top" role="navigation">
          <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
            <span class="sr-only">Alternar navegación</span>
          </a>
        </nav>
      </header>

      <aside class="main-sidebar">
        <section class="sidebar">
          <div class="user-panel">
            <div class="pull-left image">
              <img src="../../dist/img/user2-160x160.jpg" class="img-circle" alt="User Image" />
            </div>
            <div class="pull-left info">
              <p>Sistema Farmacéutico</p>
              <a href="#"><i class="fa fa-circle text-success"></i> En línea</a>
            </div>
          </div>
          
          <ul class="sidebar-menu">
            <li class="header">SISTEMA FARMACÉUTICO</li>
            <li><a href="../../index.html"><i class="fa fa-dashboard"></i> <span>📊 Dashboard Principal</span></a></li>
            
            <li class="treeview">
              <a href="#">
                <i class="fa fa-file-text"></i>
                <span>📄 Informes Automáticos</span>
                <i class="fa fa-angle-left pull-right"></i>
              </a>
              <ul class="treeview-menu">
                <li><a href="../informes/crear-informe.html"><i class="fa fa-plus"></i> Crear Informe</a></li>
                <li><a href="../informes/ver-informes.html"><i class="fa fa-eye"></i> Ver Informes</a></li>
                <li><a href="../informes/programar-envios.html"><i class="fa fa-clock-o"></i> Programar Envíos</a></li>
              </ul>
            </li>

            <li class="treeview">
              <a href="#">
                <i class="fa fa-bar-chart"></i>
                <span>📈 Ventas e Inventario</span>
                <i class="fa fa-angle-left pull-right"></i>
              </a>
              <ul class="treeview-menu">
                <li><a href="../ventas/dashboard-general.html"><i class="fa fa-dashboard"></i> Dashboard General</a></li>
                <li><a href="../ventas/analisis-ventas.html"><i class="fa fa-line-chart"></i> Análisis de Ventas</a></li>
                <li><a href="../ventas/control-stock.html"><i class="fa fa-cubes"></i> Control de Stock</a></li>
              </ul>
            </li>

            <li class="treeview">
              <a href="#">
                <i class="fa fa-flask"></i>
                <span>🧪 Pujas (Labs)</span>
                <i class="fa fa-angle-left pull-right"></i>
              </a>
              <ul class="treeview-menu">
                <li><a href="../pujas/pujas-activas.html"><i class="fa fa-gavel"></i> Pujas Activas</a></li>
                <li><a href="../pujas/historial-pujas.html"><i class="fa fa-history"></i> Historial de Pujas</a></li>
                <li><a href="../pujas/gestionar-labs.html"><i class="fa fa-cogs"></i> Gestionar Labs</a></li>
              </ul>
            </li>

            <li class="treeview">
              <a href="#">
                <i class="fa fa-tags"></i>
                <span>💰 Surtido y Precios</span>
                <i class="fa fa-angle-left pull-right"></i>
              </a>
              <ul class="treeview-menu">
                <li><a href="../surtido/catalogo-productos.html"><i class="fa fa-book"></i> Catálogo Productos</a></li>
                <li><a href="../surtido/ver-tarifas.html"><i class="fa fa-list"></i> Ver Tarifas</a></li>
                <li><a href="../surtido/comparador.html"><i class="fa fa-exchange"></i> Comparador</a></li>
              </ul>
            </li>

            <li class="active treeview">
              <a href="#">
                <i class="fa fa-share-alt"></i>
                <span>🤝 Recursos Compartidos</span>
                <i class="fa fa-angle-left pull-right"></i>
              </a>
              <ul class="treeview-menu">
                <li><a href="ver-disponibilidad.html"><i class="fa fa-calendar"></i> Ver Disponibilidad</a></li>
                <li><a href="solicitar-recurso.html"><i class="fa fa-hand-paper-o"></i> Solicitar Recurso</a></li>
                <li class="active"><a href="mis-peticiones.html"><i class="fa fa-user"></i> Mis Peticiones</a></li>
              </ul>
            </li>

            <li class="treeview">
              <a href="#">
                <i class="fa fa-gift"></i>
                <span>🎁 Promos y Fidelización</span>
                <i class="fa fa-angle-left pull-right"></i>
              </a>
              <ul class="treeview-menu">
                <li><a href="../promos/crear-promocion.html"><i class="fa fa-plus"></i> Crear Promoción</a></li>
                <li><a href="../promos/club-fidelidad.html"><i class="fa fa-star"></i> Club Fidelidad</a></li>
                <li><a href="../promos/analisis-campanas.html"><i class="fa fa-pie-chart"></i> Análisis Campañas</a></li>
              </ul>
            </li>
          </ul>
        </section>
      </aside>

      <div class="content-wrapper">
        <section class="content-header">
          <h1>
            Mis Peticiones de Recursos
            <small>Gestiona tus solicitudes y reservas</small>
          </h1>
          <ol class="breadcrumb">
            <li><a href="../../index.html"><i class="fa fa-dashboard"></i> Dashboard</a></li>
            <li><a href="#">Recursos Compartidos</a></li>
            <li class="active">Mis Peticiones</li>
          </ol>
        </section>

        <section class="content">
          <!-- Header con estadísticas -->
          <div class="requests-header">
            <div class="row">
              <div class="col-md-8">
                <h3><i class="fa fa-user"></i> Panel de Mis Peticiones</h3>
                <p>Gestiona todas tus solicitudes de recursos de manera centralizada</p>
              </div>
              <div class="col-md-4 text-right">
                <button class="btn btn-success btn-lg" onclick="window.location.href='solicitar-recurso.html'">
                  <i class="fa fa-plus"></i> Nueva Solicitud
                </button>
              </div>
            </div>
          </div>

          <!-- Estadísticas rápidas -->
          <div class="row">
            <div class="col-md-3 col-sm-6">
              <div class="stats-card bg-green">
                <h3>7</h3>
                <p>Solicitudes Confirmadas</p>
                <i class="fa fa-check-circle fa-2x"></i>
              </div>
            </div>
            <div class="col-md-3 col-sm-6">
              <div class="stats-card bg-yellow">
                <h3>3</h3>
                <p>Pendientes Revisión</p>
                <i class="fa fa-clock-o fa-2x"></i>
              </div>
            </div>
            <div class="col-md-3 col-sm-6">
              <div class="stats-card bg-aqua">
                <h3>12</h3>
                <p>Total Este Mes</p>
                <i class="fa fa-calendar fa-2x"></i>
              </div>
            </div>
            <div class="col-md-3 col-sm-6">
              <div class="stats-card bg-red">
                <h3>€156</h3>
                <p>Costo Acumulado</p>
                <i class="fa fa-euro fa-2x"></i>
              </div>
            </div>
          </div>

          <!-- Filtros y búsqueda -->
          <div class="search-filters">
            <div class="row">
              <div class="col-md-3">
                <label>Buscar por referencia o recurso</label>
                <input type="text" class="form-control" placeholder="Buscar..." id="searchRequests">
              </div>
              <div class="col-md-2">
                <label>Estado</label>
                <select class="form-control" id="filterStatus">
                  <option value="">Todos los estados</option>
                  <option value="confirmed">Confirmadas</option>
                  <option value="pending">Pendientes</option>
                  <option value="rejected">Rechazadas</option>
                  <option value="cancelled">Canceladas</option>
                </select>
              </div>
              <div class="col-md-2">
                <label>Tipo de Recurso</label>
                <select class="form-control" id="filterType">
                  <option value="">Todos los tipos</option>
                  <option value="equipment">Equipos</option>
                  <option value="service">Servicios</option>
                  <option value="space">Espacios</option>
                  <option value="specialist">Especialistas</option>
                </select>
              </div>
              <div class="col-md-2">
                <label>Fecha desde</label>
                <input type="date" class="form-control" id="filterDateFrom">
              </div>
              <div class="col-md-2">
                <label>Fecha hasta</label>
                <input type="date" class="form-control" id="filterDateTo">
              </div>
              <div class="col-md-1">
                <label>&nbsp;</label>
                <button class="btn btn-primary btn-block" onclick="applyFilters()">
                  <i class="fa fa-filter"></i>
                </button>
              </div>
            </div>
          </div>

          <!-- Tabs de filtros rápidos -->
          <div class="filter-tabs">
            <ul class="nav nav-tabs">
              <li class="active">
                <a href="#all-requests" data-toggle="tab" onclick="filterByTab('all')">
                  <i class="fa fa-list"></i> Todas (12)
                </a>
              </li>
              <li>
                <a href="#pending-requests" data-toggle="tab" onclick="filterByTab('pending')">
                  <i class="fa fa-clock-o"></i> Pendientes (3)
                </a>
              </li>
              <li>
                <a href="#confirmed-requests" data-toggle="tab" onclick="filterByTab('confirmed')">
                  <i class="fa fa-check"></i> Confirmadas (7)
                </a>
              </li>
              <li>
                <a href="#upcoming-requests" data-toggle="tab" onclick="filterByTab('upcoming')">
                  <i class="fa fa-calendar"></i> Próximas (4)
                </a>
              </li>
              <li>
                <a href="#history-requests" data-toggle="tab" onclick="filterByTab('history')">
                  <i class="fa fa-history"></i> Historial (15)
                </a>
              </li>
            </ul>
          </div>

          <!-- Lista de peticiones -->
          <div class="row">
            <div class="col-md-8">
              <!-- Petición 1: Confirmada -->
              <div class="request-card confirmed" data-status="confirmed" data-type="equipment">
                <div class="row">
                  <div class="col-md-1">
                    <div class="resource-type-icon equipment">
                      <i class="fa fa-stethoscope"></i>
                    </div>
                  </div>
                  <div class="col-md-8">
                    <div class="row">
                      <div class="col-md-8">
                        <h4><strong>Ecógrafo Doppler HD15</strong></h4>
                        <p class="text-muted">Ref: REQ-ECO-001 | Farmacia Central Madrid</p>
                        <p><strong>Fecha:</strong> 18 Ene 2025, 10:00-10:30</p>
                        <span class="priority-badge priority-medium">
                          <i class="fa fa-exclamation"></i> Prioridad Media
                        </span>
                      </div>
                      <div class="col-md-4 text-right">
                        <span class="status-badge status-confirmed">
                          <i class="fa fa-check-circle"></i> Confirmada
                        </span>
                        <h5 style="margin: 10px 0; color: #183657;">€25.00</h5>
                        <small class="text-muted">Confirmada hace 2 horas</small>
                      </div>
                    </div>
                    
                    <div class="request-details">
                      <p><strong>Motivo:</strong> Ecografía rutinaria según indicación médica para seguimiento prenatal</p>
                      <p><strong>Duración:</strong> 30 minutos | <strong>Pacientes:</strong> 1 persona</p>
                      <p><strong>Contacto:</strong> Dr. Martínez - Tel: 91-123-4567</p>
                    </div>
                    
                    <div class="action-buttons">
                      <button class="btn btn-info btn-sm" onclick="viewDetails('REQ-ECO-001')">
                        <i class="fa fa-eye"></i> Ver Detalles
                      </button>
                      <button class="btn btn-success btn-sm" onclick="downloadConfirmation('REQ-ECO-001')">
                        <i class="fa fa-download"></i> Descargar Confirmación
                      </button>
                      <button class="btn btn-warning btn-sm" onclick="modifyRequest('REQ-ECO-001')">
                        <i class="fa fa-edit"></i> Modificar
                      </button>
                      <button class="btn btn-danger btn-sm" onclick="cancelRequest('REQ-ECO-001')">
                        <i class="fa fa-times"></i> Cancelar
                      </button>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <div class="timeline">
                      <div class="timeline-item">
                        <strong>Solicitud enviada</strong><br>
                        <small>16 Ene, 14:30</small>
                      </div>
                      <div class="timeline-item">
                        <strong>En revisión</strong><br>
                        <small>16 Ene, 15:45</small>
                      </div>
                      <div class="timeline-item">
                        <strong>Confirmada</strong><br>
                        <small>17 Ene, 09:15</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Petición 2: Pendiente -->
              <div class="request-card pending" data-status="pending" data-type="specialist">
                <div class="row">
                  <div class="col-md-1">
                    <div class="resource-type-icon specialist">
                      <i class="fa fa-user-md"></i>
                    </div>
                  </div>
                  <div class="col-md-8">
                    <div class="row">
                      <div class="col-md-8">
                        <h4><strong>Dra. García - Nutricionista</strong></h4>
                        <p class="text-muted">Ref: REQ-NUT-002 | Farmacia Salud Total</p>
                        <p><strong>Fecha solicitada:</strong> 20 Ene 2025, 15:00-15:45</p>
                        <span class="priority-badge priority-low">
                          <i class="fa fa-clock-o"></i> Prioridad Baja
                        </span>
                      </div>
                      <div class="col-md-4 text-right">
                        <span class="status-badge status-pending">
                          <i class="fa fa-clock-o"></i> Pendiente
                        </span>
                        <h5 style="margin: 10px 0; color: #ffc107;">€45.00</h5>
                        <small class="text-muted">Enviada hace 1 día</small>
                      </div>
                    </div>
                    
                    <div class="request-details">
                      <p><strong>Motivo:</strong> Consulta nutricional para plan alimentario personalizado paciente diabético</p>
                      <p><strong>Duración:</strong> 45 minutos | <strong>Pacientes:</strong> 1 persona</p>
                    </div>
                    
                    <div class="action-buttons">
                      <button class="btn btn-info btn-sm" onclick="viewDetails('REQ-NUT-002')">
                        <i class="fa fa-eye"></i> Ver Detalles
                      </button>
                      <button class="btn btn-warning btn-sm" onclick="modifyRequest('REQ-NUT-002')">
                        <i class="fa fa-edit"></i> Modificar
                      </button>
                      <button class="btn btn-danger btn-sm" onclick="cancelRequest('REQ-NUT-002')">
                        <i class="fa fa-times"></i> Cancelar
                      </button>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <div class="timeline">
                      <div class="timeline-item">
                        <strong>Solicitud enviada</strong><br>
                        <small>16 Ene, 11:20</small>
                      </div>
                      <div class="timeline-item pending">
                        <strong>En revisión</strong><br>
                        <small>Desde hace 6 horas</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Petición 3: Rechazada -->
              <div class="request-card rejected" data-status="rejected" data-type="service">
                <div class="row">
                  <div class="col-md-1">
                    <div class="resource-type-icon service">
                      <i class="fa fa-shield"></i>
                    </div>
                  </div>
                  <div class="col-md-8">
                    <div class="row">
                      <div class="col-md-8">
                        <h4><strong>Servicio de Vacunación COVID-19</strong></h4>
                        <p class="text-muted">Ref: REQ-VAC-003 | Farmacia San José</p>
                        <p><strong>Fecha solicitada:</strong> 15 Ene 2025, 16:00-16:15</p>
                        <span class="priority-badge priority-high">
                          <i class="fa fa-bolt"></i> Prioridad Alta
                        </span>
                      </div>
                      <div class="col-md-4 text-right">
                        <span class="status-badge status-rejected">
                          <i class="fa fa-times-circle"></i> Rechazada
                        </span>
                        <h5 style="margin: 10px 0; color: #FF1E70;">€15.00</h5>
                        <small class="text-muted">Rechazada ayer</small>
                      </div>
                    </div>
                    
                    <div class="request-details">
                      <p><strong>Motivo:</strong> Administración de segunda dosis según calendario de vacunación</p>
                      <p><strong>Motivo del rechazo:</strong> No hay stock disponible de la vacuna solicitada en esa fecha</p>
                    </div>
                    
                    <div class="action-buttons">
                      <button class="btn btn-info btn-sm" onclick="viewDetails('REQ-VAC-003')">
                        <i class="fa fa-eye"></i> Ver Detalles
                      </button>
                      <button class="btn btn-primary btn-sm" onclick="requestAlternative('REQ-VAC-003')">
                        <i class="fa fa-refresh"></i> Solicitar Alternativa
                      </button>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <div class="timeline">
                      <div class="timeline-item">
                        <strong>Solicitud enviada</strong><br>
                        <small>14 Ene, 09:30</small>
                      </div>
                      <div class="timeline-item">
                        <strong>En revisión</strong><br>
                        <small>14 Ene, 10:15</small>
                      </div>
                      <div class="timeline-item rejected">
                        <strong>Rechazada</strong><br>
                        <small>15 Ene, 08:45</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Petición 4: Cancelada -->
              <div class="request-card cancelled" data-status="cancelled" data-type="space">
                <div class="row">
                  <div class="col-md-1">
                    <div class="resource-type-icon space">
                      <i class="fa fa-home"></i>
                    </div>
                  </div>
                  <div class="col-md-8">
                    <div class="row">
                      <div class="col-md-8">
                        <h4><strong>Sala de Consulta Premium</strong></h4>
                        <p class="text-muted">Ref: REQ-SAL-004 | Farmacia Nueva Vida</p>
                        <p><strong>Fecha:</strong> 14 Ene 2025, 14:00-15:00</p>
                        <span class="priority-badge priority-medium">
                          <i class="fa fa-exclamation"></i> Prioridad Media
                        </span>
                      </div>
                      <div class="col-md-4 text-right">
                        <span class="status-badge status-cancelled">
                          <i class="fa fa-ban"></i> Cancelada
                        </span>
                        <h5 style="margin: 10px 0; color: #6c757d;">€20.00</h5>
                        <small class="text-muted">Cancelada por usuario</small>
                      </div>
                    </div>
                    
                    <div class="request-details">
                      <p><strong>Motivo:</strong> Consulta farmacéutica privada con paciente para revisión de medicación</p>
                      <p><strong>Motivo cancelación:</strong> El paciente no pudo asistir por motivos personales</p>
                    </div>
                    
                    <div class="action-buttons">
                      <button class="btn btn-info btn-sm" onclick="viewDetails('REQ-SAL-004')">
                        <i class="fa fa-eye"></i> Ver Detalles
                      </button>
                      <button class="btn btn-primary btn-sm" onclick="repeatRequest('REQ-SAL-004')">
                        <i class="fa fa-repeat"></i> Repetir Solicitud
                      </button>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <div class="timeline">
                      <div class="timeline-item">
                        <strong>Solicitud enviada</strong><br>
                        <small>12 Ene, 16:00</small>
                      </div>
                      <div class="timeline-item">
                        <strong>Confirmada</strong><br>
                        <small>13 Ene, 09:30</small>
                      </div>
                      <div class="timeline-item cancelled">
                        <strong>Cancelada</strong><br>
                        <small>14 Ene, 10:00</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Panel lateral -->
            <div class="col-md-4">
              <!-- Acciones rápidas -->
              <div class="quick-actions">
                <h4><i class="fa fa-bolt"></i> Acciones Rápidas</h4>
                
                <button class="btn btn-success btn-block" onclick="window.location.href='solicitar-recurso.html'">
                  <i class="fa fa-plus"></i> Nueva Solicitud
                </button>
                
                <button class="btn btn-primary btn-block" onclick="viewCalendar()">
                  <i class="fa fa-calendar"></i> Ver Calendario
                </button>
                
                <button class="btn btn-info btn-block" onclick="exportRequests()">
                  <i class="fa fa-download"></i> Exportar Historial
                </button>
                
                <button class="btn btn-warning btn-block" onclick="configureNotifications()">
                  <i class="fa fa-bell"></i> Configurar Alertas
                </button>
              </div>

              <!-- Calendar mini -->
              <div class="calendar-view">
                <h4><i class="fa fa-calendar"></i> Próximas Citas</h4>
                
                <div style="border-left: 4px solid #14D5AA; padding-left: 10px; margin-bottom: 10px;">
                  <strong>Hoy, 18 Ene</strong><br>
                  <div class="calendar-event">10:00 - Ecógrafo (Confirmada)</div>
                </div>
                
                <div style="border-left: 4px solid #ffc107; padding-left: 10px; margin-bottom: 10px;">
                  <strong>Vie, 20 Ene</strong><br>
                  <div class="calendar-event pending">15:00 - Nutricionista (Pendiente)</div>
                </div>
                
                <div style="border-left: 4px solid #14D5AA; padding-left: 10px; margin-bottom: 10px;">
                  <strong>Lun, 23 Ene</strong><br>
                  <div class="calendar-event">09:30 - Sala Consulta (Confirmada)</div>
                </div>
                
                <button class="btn btn-default btn-sm btn-block" onclick="viewFullCalendar()">
                  Ver Calendario Completo
                </button>
              </div>

              <!-- Notificaciones -->
              <div class="notification-panel">
                <h4><i class="fa fa-bell"></i> Notificaciones</h4>
                
                <div class="alert alert-success alert-dismissible">
                  <button type="button" class="close" data-dismiss="alert"><span>&times;</span></button>
                  <strong>✅ Confirmación:</strong> Tu solicitud REQ-ECO-001 ha sido confirmada para mañana a las 10:00.
                </div>
                
                <div class="alert alert-warning alert-dismissible">
                  <button type="button" class="close" data-dismiss="alert"><span>&times;</span></button>
                  <strong>⏰ Recordatorio:</strong> Tienes una cita mañana a las 10:00. No olvides llevar la documentación.
                </div>
                
                <div class="alert alert-info alert-dismissible">
                  <button type="button" class="close" data-dismiss="alert"><span>&times;</span></button>
                  <strong>📝 Sugerencia:</strong> Hay nuevos recursos disponibles en tu zona. <a href="ver-disponibilidad.html">Ver disponibilidad</a>
                </div>
              </div>

              <!-- Estadísticas del usuario -->
              <div class="box box-primary">
                <div class="box-header">
                  <h3 class="box-title">Mi Actividad</h3>
                </div>
                <div class="box-body">
                  <div class="row">
                    <div class="col-xs-6 text-center">
                      <div style="margin-bottom: 15px;">
                        <div style="font-size: 24px; font-weight: bold; color: #14D5AA;">92%</div>
                        <small>Tasa de Confirmación</small>
                      </div>
                    </div>
                    <div class="col-xs-6 text-center">
                      <div style="margin-bottom: 15px;">
                        <div style="font-size: 24px; font-weight: bold; color: #183657;">4.8</div>
                        <small>Valoración Promedio</small>
                      </div>
                    </div>
                  </div>
                  
                  <div class="progress" style="margin-bottom: 10px;">
                    <div class="progress-bar" style="width: 85%; background-color: #14D5AA;"></div>
                  </div>
                  <small>Nivel de Usuario: Experto (85/100)</small>
                  
                  <p style="margin-top: 15px; margin-bottom: 5px;"><strong>Beneficios Desbloqueados:</strong></p>
                  <ul style="font-size: 12px; margin-bottom: 0;">
                    <li>✅ Reserva prioritaria</li>
                    <li>✅ Cancelación gratuita</li>
                    <li>✅ Descuentos especiales</li>
                    <li>⏳ Acceso VIP (nivel 90)</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>

      <footer class="main-footer">
        <div class="pull-right hidden-xs">
          <b>Versión</b> 2.0
        </div>
        <strong>Derechos de Autor &copy; 2014-2025 <a href="#">Gest Farma</a>.</strong> Todos los derechos reservados.
      </footer>
    </div>

    <!-- Scripts -->
    <script src="../../plugins/jQuery/jQuery-2.1.3.min.js"></script>
    <script src="../../bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="../../dist/js/app.min.js" type="text/javascript"></script>
    <script src="../../plugins/datatables/jquery.dataTables.js" type="text/javascript"></script>
    <script src="../../plugins/datatables/dataTables.bootstrap.js" type="text/javascript"></script>
    
    <script>
      // Variables globales
      let allRequests = [];
      let filteredRequests = [];

      // Inicialización
      $(document).ready(function() {
        loadRequestsData();
        setupEventListeners();
      });

      function loadRequestsData() {
        // Simular carga de datos (normalmente vendría del servidor)
        allRequests = [
          {
            id: 'REQ-ECO-001',
            type: 'equipment',
            status: 'confirmed',
            resource: 'Ecógrafo Doppler HD15',
            date: '2025-01-18',
            time: '10:00',
            priority: 'medium',
            cost: 25.00
          },
          {
            id: 'REQ-NUT-002',
            type: 'specialist',
            status: 'pending',
            resource: 'Dra. García - Nutricionista',
            date: '2025-01-20',
            time: '15:00',
            priority: 'low',
            cost: 45.00
          },
          {
            id: 'REQ-VAC-003',
            type: 'service',
            status: 'rejected',
            resource: 'Servicio de Vacunación COVID-19',
            date: '2025-01-15',
            time: '16:00',
            priority: 'high',
            cost: 15.00
          },
          {
            id: 'REQ-SAL-004',
            type: 'space',
            status: 'cancelled',
            resource: 'Sala de Consulta Premium',
            date: '2025-01-14',
            time: '14:00',
            priority: 'medium',
            cost: 20.00
          }
        ];
        
        filteredRequests = [...allRequests];
      }

      function setupEventListeners() {
        // Búsqueda en tiempo real
        $('#searchRequests').on('input', function() {
          applyFilters();
        });
        
        // Filtros de cambio
        $('#filterStatus, #filterType, #filterDateFrom, #filterDateTo').change(function() {
          applyFilters();
        });
      }

      // Funciones de filtrado
      function filterByTab(tab) {
        switch(tab) {
          case 'all':
            filteredRequests = [...allRequests];
            break;
          case 'pending':
            filteredRequests = allRequests.filter(r => r.status === 'pending');
            break;
          case 'confirmed':
            filteredRequests = allRequests.filter(r => r.status === 'confirmed');
            break;
          case 'upcoming':
            const today = new Date();
            filteredRequests = allRequests.filter(r => {
              const requestDate = new Date(r.date);
              return requestDate >= today && (r.status === 'confirmed' || r.status === 'pending');
            });
            break;
          case 'history':
            const thirtyDaysAgo = new Date();
            thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
            filteredRequests = allRequests.filter(r => {
              const requestDate = new Date(r.date);
              return requestDate < thirtyDaysAgo;
            });
            break;
        }
        updateRequestsDisplay();
      }

      function applyFilters() {
        const searchTerm = $('#searchRequests').val().toLowerCase();
        const statusFilter = $('#filterStatus').val();
        const typeFilter = $('#filterType').val();
        const dateFromFilter = $('#filterDateFrom').val();
        const dateToFilter = $('#filterDateTo').val();
        
        filteredRequests = allRequests.filter(request => {
          // Filtro de búsqueda
          if (searchTerm && !request.id.toLowerCase().includes(searchTerm) && 
              !request.resource.toLowerCase().includes(searchTerm)) {
            return false;
          }
          
          // Filtro de estado
          if (statusFilter && request.status !== statusFilter) {
            return false;
          }
          
          // Filtro de tipo
          if (typeFilter && request.type !== typeFilter) {
            return false;
          }
          
          // Filtros de fecha
          if (dateFromFilter && request.date < dateFromFilter) {
            return false;
          }
          
          if (dateToFilter && request.date > dateToFilter) {
            return false;
          }
          
          return true;
        });
        
        updateRequestsDisplay();
      }

      function updateRequestsDisplay() {
        // Actualizar contadores en tabs
        const pendingCount = filteredRequests.filter(r => r.status === 'pending').length;
        const confirmedCount = filteredRequests.filter(r => r.status === 'confirmed').length;
        // ... actualizar otros contadores
        
        console.log(`Mostrando ${filteredRequests.length} de ${allRequests.length} solicitudes`);
      }

      // Funciones de acciones
      function viewDetails(requestId) {
        alert('Mostrando detalles de la solicitud: ' + requestId);
      }

      function downloadConfirmation(requestId) {
        alert('Descargando confirmación de: ' + requestId);
      }

      function modifyRequest(requestId) {
        if (confirm('¿Estás seguro de que quieres modificar esta solicitud?')) {
          alert('Redirigiendo a formulario de modificación...');
          // window.location.href = 'solicitar-recurso.html?modify=' + requestId;
        }
      }

      function cancelRequest(requestId) {
        if (confirm('¿Estás seguro de que quieres cancelar esta solicitud?\n\nEsta acción no se puede deshacer.')) {
          alert('Solicitud ' + requestId + ' cancelada exitosamente');
          // Aquí se actualizaría el estado en el servidor
        }
      }

      function requestAlternative(requestId) {
        alert('Buscando alternativas para: ' + requestId);
        // window.location.href = 'solicitar-recurso.html?alternative=' + requestId;
      }

      function repeatRequest(requestId) {
        if (confirm('¿Quieres crear una nueva solicitud basada en esta?')) {
          alert('Creando nueva solicitud basada en: ' + requestId);
          // window.location.href = 'solicitar-recurso.html?repeat=' + requestId;
        }
      }

      // Funciones del panel lateral
      function viewCalendar() {
        alert('Abriendo vista de calendario completo...');
      }

      function exportRequests() {
        alert('Exportando historial de solicitudes...');
      }

      function configureNotifications() {
        alert('Abriendo configuración de notificaciones...');
      }

      function viewFullCalendar() {
        alert('Mostrando calendario completo...');
      }

      // Actualización automática cada 30 segundos
      setInterval(function() {
        console.log('Actualizando estado de solicitudes...');
        // Aquí se verificarían actualizaciones del servidor
      }, 30000);

      // Notificaciones en tiempo real (simulación)
      setTimeout(function() {
        if (Math.random() > 0.7) {
          const notification = $(`
            <div class="alert alert-info alert-dismissible">
              <button type="button" class="close" data-dismiss="alert"><span>&times;</span></button>
              <strong>🔔 Nueva actualización:</strong> El estado de una de tus solicitudes ha cambiado.
            </div>
          `);
          $('.notification-panel').append(notification);
        }
      }, 5000);
    </script>
  </body>
</html>
